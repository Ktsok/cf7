<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UpdateTeacherPage.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">schoolapp7-swing-soa-stage</a> &gt; <a href="index.source.html" class="el_package">gr.aueb.cf.schoolapp.view_controller</a> &gt; <span class="el_source">UpdateTeacherPage.java</span></div><h1>UpdateTeacherPage.java</h1><pre class="source lang-java linenums">package gr.aueb.cf.schoolapp.view_controller;

import gr.aueb.cf.schoolapp.Main;
import gr.aueb.cf.schoolapp.dao.CityDAOImpl;
import gr.aueb.cf.schoolapp.dao.ICityDAO;
import gr.aueb.cf.schoolapp.dao.ITeacherDAO;
import gr.aueb.cf.schoolapp.dao.TeacherDAOImpl;
import gr.aueb.cf.schoolapp.dao.exceptions.TeacherDAOException;
import gr.aueb.cf.schoolapp.dto.TeacherReadOnlyDTO;
import gr.aueb.cf.schoolapp.dto.TeacherUpdateDTO;
import gr.aueb.cf.schoolapp.exceptions.TeacherAlreadyExistsException;
import gr.aueb.cf.schoolapp.exceptions.TeacherNotFoundException;
import gr.aueb.cf.schoolapp.model.City;
import gr.aueb.cf.schoolapp.service.CityServiceImpl;
import gr.aueb.cf.schoolapp.service.ICityService;
import gr.aueb.cf.schoolapp.service.ITeacherService;
import gr.aueb.cf.schoolapp.service.TeacherServiceImpl;
import gr.aueb.cf.schoolapp.validator.TeacherValidator;

import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.awt.*;
import java.awt.event.*;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

public class UpdateTeacherPage extends JFrame {

	private static final long serialVersionUID = 1L;
	private JPanel contentPane;
	private JTextField firstnameText;
	private JTextField lastnameText;
	private JTextField vatText;
	private JTextField fathernameText;
	private JTextField phoneNumberText;
	private JTextField emailText;
	private JTextField streetText;
	private JTextField streetNumberText;
	private JTextField zipcodeText;
	private JLabel errorFirstname;
	private JLabel errorLastname;
	private JComboBox&lt;City&gt; cityComboBox;
<span class="nc" id="L45">	private List&lt;City&gt; cities = new ArrayList&lt;&gt;();</span>

<span class="nc" id="L47">	private final ICityDAO cityDao = new CityDAOImpl();</span>
<span class="nc" id="L48">	private final ICityService cityService = new CityServiceImpl(cityDao);</span>

<span class="nc" id="L50">	private final ITeacherDAO teacherDAO = new TeacherDAOImpl();</span>
<span class="nc" id="L51">	private final ITeacherService teacherService = new TeacherServiceImpl(teacherDAO);</span>

	TeacherReadOnlyDTO dto;

<span class="nc" id="L55">	public UpdateTeacherPage() {</span>
<span class="nc" id="L56">		addWindowListener(new WindowAdapter() {</span>
			@Override
			public void windowActivated(WindowEvent e) {
				try {
<span class="nc" id="L60">					cities = cityService.getAllCities();</span>
<span class="nc" id="L61">					cities.forEach(cityComboBox::addItem);</span>
<span class="nc" id="L62">				} catch (SQLException ex) {</span>
					// ex.printStackTrace();
<span class="nc" id="L64">					JOptionPane.showMessageDialog(null, &quot;Get cities fatal error.&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);</span>
<span class="nc" id="L65">				}</span>

<span class="nc" id="L67">				fetchTeacherFromDatabase(Main.getViewTeachersPage().getSelectedId());</span>
				//Integer id = Main.getViewTeachersPage().getSelectedId(); // todo
				// System.out.println(id);
				//if (id != null) fetchTeacherFromDatabase(id);

<span class="nc" id="L72">				errorFirstname.setText(&quot;&quot;);</span>
<span class="nc" id="L73">				errorLastname.setText(&quot;&quot;);</span>
<span class="nc" id="L74">			}</span>
		});
<span class="nc" id="L76">		setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);</span>
<span class="nc" id="L77">		setTitle(&quot;Ποιότητα στην Εκπαίδευση&quot;);</span>
<span class="nc" id="L78">		setBounds(100, 100, 857, 701);</span>
<span class="nc" id="L79">		contentPane = new JPanel();</span>
<span class="nc" id="L80">		contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));</span>

<span class="nc" id="L82">		setContentPane(contentPane);</span>
<span class="nc" id="L83">		contentPane.setLayout(null);</span>
		
<span class="nc" id="L85">		JLabel lblTeacherInfo = new JLabel(&quot;Στοιχεία Εκπαιδευτή&quot;);</span>
<span class="nc" id="L86">		lblTeacherInfo.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 22));</span>
<span class="nc" id="L87">		lblTeacherInfo.setBounds(267, 63, 341, 44);</span>
<span class="nc" id="L88">		contentPane.add(lblTeacherInfo);</span>
		
<span class="nc" id="L90">		JPanel header = new JPanel();</span>
<span class="nc" id="L91">		header.setLayout(null);</span>
<span class="nc" id="L92">		header.setBackground(new Color(0, 52, 117));</span>
<span class="nc" id="L93">		header.setBounds(0, 0, 842, 52);</span>
<span class="nc" id="L94">		contentPane.add(header);</span>
		
<span class="nc" id="L96">		JLabel govImage = new JLabel(&quot;&quot;);</span>
<span class="nc" id="L97">		govImage.setIcon(new ImageIcon(InsertTeacherPage.class.getResource(&quot;/images/gov_logo_small.png&quot;)));</span>
<span class="nc" id="L98">		govImage.setBounds(0, 0, 100, 52);</span>
<span class="nc" id="L99">		header.add(govImage);</span>
		
<span class="nc" id="L101">		JLabel firstLastName = new JLabel(&quot;ΑΘΑΝΑΣΙΟΣ ΑΝΔΡΟΥΤΣΟΣ&quot;);</span>
<span class="nc" id="L102">		firstLastName.setForeground(Color.WHITE);</span>
<span class="nc" id="L103">		firstLastName.setBounds(649, 11, 183, 30);</span>
<span class="nc" id="L104">		header.add(firstLastName);</span>
		
<span class="nc" id="L106">		JPanel footer = new JPanel();</span>
<span class="nc" id="L107">		footer.setLayout(null);</span>
<span class="nc" id="L108">		footer.setBounds(0, 574, 842, 90);</span>
<span class="nc" id="L109">		contentPane.add(footer);</span>
		
<span class="nc" id="L111">		JLabel lbl_manual = new JLabel(&quot;Εγχειρίδιο Χρήσης&quot;);</span>
<span class="nc" id="L112">		lbl_manual.setForeground(new Color(0, 52, 117));</span>
<span class="nc" id="L113">		lbl_manual.setBounds(199, 37, 151, 29);</span>
<span class="nc" id="L114">		footer.add(lbl_manual);</span>
		
<span class="nc" id="L116">		JLabel lbl_oftenQuestions = new JLabel(&quot;Συχνές Ερωτήσεις&quot;);</span>
<span class="nc" id="L117">		lbl_oftenQuestions.setForeground(new Color(0, 52, 117));</span>
<span class="nc" id="L118">		lbl_oftenQuestions.setBounds(360, 37, 151, 29);</span>
<span class="nc" id="L119">		footer.add(lbl_oftenQuestions);</span>
		
<span class="nc" id="L121">		JLabel lbl_support = new JLabel(&quot;Υποστήριξη Πολιτών&quot;);</span>
<span class="nc" id="L122">		lbl_support.setForeground(new Color(0, 52, 117));</span>
<span class="nc" id="L123">		lbl_support.setBounds(521, 37, 151, 29);</span>
<span class="nc" id="L124">		footer.add(lbl_support);</span>
		
<span class="nc" id="L126">		JSeparator lineBottom = new JSeparator();</span>
<span class="nc" id="L127">		lineBottom.setBackground(Color.BLUE);</span>
<span class="nc" id="L128">		lineBottom.setBounds(0, 0, 850, 2);</span>
<span class="nc" id="L129">		footer.add(lineBottom);</span>
		
<span class="nc" id="L131">		firstnameText = new JTextField();</span>
<span class="nc" id="L132">		firstnameText.setBounds(91, 131, 263, 37);</span>
<span class="nc" id="L133">		contentPane.add(firstnameText);</span>
<span class="nc" id="L134">		firstnameText.setColumns(10);</span>
		
<span class="nc" id="L136">		firstnameText.addFocusListener(new FocusAdapter() {</span>
			@Override
			public void focusLost(FocusEvent e) {
				String inputFirstname;	
<span class="nc" id="L140">				inputFirstname = firstnameText.getText().trim();</span>
<span class="nc bnc" id="L141" title="All 2 branches missed.">				errorFirstname.setText(inputFirstname.equals(&quot;&quot;) ? &quot;Το όνομα είναι υποχρεωτικό&quot; : &quot;&quot;);</span>
<span class="nc" id="L142">			}</span>
		});
		
<span class="nc" id="L145">		lastnameText = new JTextField();</span>
<span class="nc" id="L146">		lastnameText.setColumns(10);</span>
<span class="nc" id="L147">		lastnameText.setBounds(512, 131, 263, 37);</span>
<span class="nc" id="L148">		contentPane.add(lastnameText);</span>
		
<span class="nc" id="L150">		lastnameText.addFocusListener(new FocusAdapter() {</span>
			@Override
			public void focusLost(FocusEvent e) {
				String inputLastname;	
<span class="nc" id="L154">				inputLastname = lastnameText.getText().trim();</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">				errorLastname.setText(inputLastname.isEmpty() ? &quot;Το επώνυμο είναι υποχρεωτικό&quot; : &quot;&quot;);</span>
<span class="nc" id="L156">			}</span>
		});
		
<span class="nc" id="L159">		JLabel lblFirstname = new JLabel(&quot;Όνομα*&quot;);</span>
<span class="nc" id="L160">		lblFirstname.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L161">		lblFirstname.setBounds(29, 135, 62, 29);</span>
<span class="nc" id="L162">		contentPane.add(lblFirstname);</span>
		
<span class="nc" id="L164">		JLabel lblLastname = new JLabel(&quot;Επώνυμο*&quot;);</span>
<span class="nc" id="L165">		lblLastname.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L166">		lblLastname.setBounds(432, 135, 84, 29);</span>
<span class="nc" id="L167">		contentPane.add(lblLastname);</span>
		
<span class="nc" id="L169">		JLabel lblVat = new JLabel(&quot;ΑΦΜ*&quot;);</span>
<span class="nc" id="L170">		lblVat.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L171">		lblVat.setBounds(41, 202, 50, 29);</span>
<span class="nc" id="L172">		contentPane.add(lblVat);</span>
		
<span class="nc" id="L174">		vatText = new JTextField();</span>
<span class="nc" id="L175">		vatText.setColumns(10);</span>
<span class="nc" id="L176">		vatText.setBounds(91, 198, 263, 37);</span>
<span class="nc" id="L177">		contentPane.add(vatText);</span>
		
<span class="nc" id="L179">		JLabel lblFathername = new JLabel(&quot;Πατρώνυμο*&quot;);</span>
<span class="nc" id="L180">		lblFathername.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L181">		lblFathername.setBounds(421, 202, 95, 29);</span>
<span class="nc" id="L182">		contentPane.add(lblFathername);</span>
		
<span class="nc" id="L184">		fathernameText = new JTextField();</span>
<span class="nc" id="L185">		fathernameText.setColumns(10);</span>
<span class="nc" id="L186">		fathernameText.setBounds(512, 198, 263, 37);</span>
<span class="nc" id="L187">		contentPane.add(fathernameText);</span>
		
<span class="nc" id="L189">		JLabel lblPhoneNumber = new JLabel(&quot;Τηλέφωνο*&quot;);</span>
<span class="nc" id="L190">		lblPhoneNumber.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L191">		lblPhoneNumber.setBounds(10, 275, 81, 29);</span>
<span class="nc" id="L192">		contentPane.add(lblPhoneNumber);</span>
		
<span class="nc" id="L194">		phoneNumberText = new JTextField();</span>
<span class="nc" id="L195">		phoneNumberText.setColumns(10);</span>
<span class="nc" id="L196">		phoneNumberText.setBounds(91, 271, 263, 37);</span>
<span class="nc" id="L197">		contentPane.add(phoneNumberText);</span>
		
<span class="nc" id="L199">		JLabel lblEmail = new JLabel(&quot;e-mail*&quot;);</span>
<span class="nc" id="L200">		lblEmail.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L201">		lblEmail.setBounds(460, 275, 56, 29);</span>
<span class="nc" id="L202">		contentPane.add(lblEmail);</span>
		
<span class="nc" id="L204">		emailText = new JTextField();</span>
<span class="nc" id="L205">		emailText.setColumns(10);</span>
<span class="nc" id="L206">		emailText.setBounds(512, 271, 263, 37);</span>
<span class="nc" id="L207">		contentPane.add(emailText);</span>
		
<span class="nc" id="L209">		JLabel lblStreet = new JLabel(&quot;Διεύθυνση*&quot;);</span>
<span class="nc" id="L210">		lblStreet.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L211">		lblStreet.setBounds(10, 342, 81, 29);</span>
<span class="nc" id="L212">		contentPane.add(lblStreet);</span>
		
<span class="nc" id="L214">		streetText = new JTextField();</span>
<span class="nc" id="L215">		streetText.setColumns(10);</span>
<span class="nc" id="L216">		streetText.setBounds(91, 338, 263, 37);</span>
<span class="nc" id="L217">		contentPane.add(streetText);</span>
		
<span class="nc" id="L219">		JLabel lblStreetNumber = new JLabel(&quot;Αριθμός*&quot;);</span>
<span class="nc" id="L220">		lblStreetNumber.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L221">		lblStreetNumber.setBounds(446, 342, 70, 29);</span>
<span class="nc" id="L222">		contentPane.add(lblStreetNumber);</span>
		
<span class="nc" id="L224">		streetNumberText = new JTextField();</span>
<span class="nc" id="L225">		streetNumberText.setColumns(10);</span>
<span class="nc" id="L226">		streetNumberText.setBounds(512, 338, 263, 37);</span>
<span class="nc" id="L227">		contentPane.add(streetNumberText);</span>
		
<span class="nc" id="L229">		JLabel lblCity = new JLabel(&quot;Πόλη*&quot;);</span>
<span class="nc" id="L230">		lblCity.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L231">		lblCity.setBounds(41, 411, 50, 29);</span>
<span class="nc" id="L232">		contentPane.add(lblCity);</span>
		
<span class="nc" id="L234">		JLabel lblZipCode = new JLabel(&quot;ΤΚ*&quot;);</span>
<span class="nc" id="L235">		lblZipCode.setFont(new Font(&quot;Tahoma&quot;, Font.BOLD, 12));</span>
<span class="nc" id="L236">		lblZipCode.setBounds(481, 411, 35, 29);</span>
<span class="nc" id="L237">		contentPane.add(lblZipCode);</span>
		
<span class="nc" id="L239">		zipcodeText = new JTextField();</span>
<span class="nc" id="L240">		zipcodeText.setColumns(10);</span>
<span class="nc" id="L241">		zipcodeText.setBounds(512, 407, 263, 37);</span>
<span class="nc" id="L242">		contentPane.add(zipcodeText);</span>
		
<span class="nc" id="L244">		errorFirstname = new JLabel(&quot;&quot;);</span>
<span class="nc" id="L245">		errorFirstname.setForeground(new Color(255, 0, 0));</span>
<span class="nc" id="L246">		errorFirstname.setBounds(92, 167, 260, 29);</span>
<span class="nc" id="L247">		contentPane.add(errorFirstname);</span>
		
<span class="nc" id="L249">		errorLastname = new JLabel(&quot;&quot;);</span>
<span class="nc" id="L250">		errorLastname.setForeground(new Color(255, 0, 0));</span>
<span class="nc" id="L251">		errorLastname.setBounds(514, 167, 260, 29);</span>
<span class="nc" id="L252">		contentPane.add(errorLastname);</span>
		
<span class="nc" id="L254">		cityComboBox = new JComboBox&lt;&gt;();</span>
<span class="nc" id="L255">		cityComboBox.setBounds(89, 407, 263, 37);</span>
<span class="nc" id="L256">		contentPane.add(cityComboBox);</span>

<span class="nc" id="L258">		JButton closeBtn = new JButton(&quot;Κλείσιμο&quot;);</span>
<span class="nc" id="L259">		closeBtn.addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent e) {
<span class="nc" id="L261">				Main.getViewTeachersPage().setEnabled(true);</span>
<span class="nc" id="L262">				Main.getUpdateTeacherPage().setVisible(false);</span>
<span class="nc" id="L263">			}</span>
		});
<span class="nc" id="L265">		closeBtn.setForeground(new Color(0, 0, 0));</span>
<span class="nc" id="L266">		closeBtn.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 12));</span>
<span class="nc" id="L267">		closeBtn.setBackground(new Color(192, 192, 192));</span>
<span class="nc" id="L268">		closeBtn.setBounds(91, 485, 263, 54);</span>
<span class="nc" id="L269">		contentPane.add(closeBtn);</span>
		
<span class="nc" id="L271">		JButton updateBtn = new JButton(&quot;Ενημέρωση&quot;);</span>
<span class="nc" id="L272">		updateBtn.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 12));</span>
<span class="nc" id="L273">		updateBtn.setForeground(new Color(255, 255, 255));</span>
<span class="nc" id="L274">		updateBtn.setBackground(new Color(64, 128, 128));</span>
<span class="nc" id="L275">		updateBtn.setBounds(512, 485, 263, 54);</span>
<span class="nc" id="L276">		contentPane.add(updateBtn);</span>
<span class="nc" id="L277">		updateBtn.addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent e) {

				// Data binding
<span class="nc" id="L281">				TeacherUpdateDTO updateDTO = doDataBinding();</span>

				// Validation
<span class="nc" id="L284">				Map&lt;String, String&gt; errors = TeacherValidator.validate(updateDTO);</span>
<span class="nc bnc" id="L285" title="All 2 branches missed.">				if (!errors.isEmpty()) {</span>
<span class="nc" id="L286">					errorFirstname.setText(errors.getOrDefault(&quot;firstname&quot;, &quot;&quot;));</span>
<span class="nc" id="L287">					errorLastname.setText(errors.getOrDefault(&quot;lastname&quot;, &quot;&quot;));</span>
<span class="nc" id="L288">					return;</span>
				}

				try {
<span class="nc" id="L292">					TeacherReadOnlyDTO teacherReadOnlyDTO = teacherService.updateTeacher(dto.getId(), updateDTO);</span>
<span class="nc" id="L293">					Main.getUpdateSuccessPage().setUuidText(teacherReadOnlyDTO.getUuid());</span>
<span class="nc" id="L294">					Main.getUpdateTeacherPage().setEnabled(false);</span>
<span class="nc" id="L295">					Main.getUpdateSuccessPage().setVisible(true);</span>
<span class="nc" id="L296">				} catch (TeacherDAOException ex) {</span>
<span class="nc" id="L297">					JOptionPane.showMessageDialog(null, &quot;DB Error&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);</span>
<span class="nc" id="L298">				} catch (TeacherAlreadyExistsException ex) {</span>
<span class="nc" id="L299">					JOptionPane.showMessageDialog(null, &quot;Teacher already exists&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);</span>
<span class="nc" id="L300">				} catch (TeacherNotFoundException ex) {</span>
<span class="nc" id="L301">					JOptionPane.showMessageDialog(null, &quot;Teacher not found&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);</span>
<span class="nc" id="L302">				}</span>
<span class="nc" id="L303">			}</span>
		});
<span class="nc" id="L305">	}</span>

	private TeacherUpdateDTO doDataBinding() {
<span class="nc" id="L308">		Integer id = dto.getId();</span>
<span class="nc" id="L309">		String firstname = firstnameText.getText().trim();</span>
<span class="nc" id="L310">		String lastname = lastnameText.getText().trim();</span>
<span class="nc" id="L311">		String vat = vatText.getText();</span>
<span class="nc" id="L312">		String fathername = fathernameText.getText();</span>
<span class="nc" id="L313">		String phoneNumber = phoneNumberText.getText();</span>
<span class="nc" id="L314">		String email = emailText.getText();</span>
<span class="nc" id="L315">		String street = streetText.getText();</span>
<span class="nc" id="L316">		String streetNumber = streetNumberText.getText();</span>
<span class="nc" id="L317">		City selectedCity = (City) cityComboBox.getSelectedItem();</span>
<span class="nc bnc" id="L318" title="All 2 branches missed.">		int cityId = (selectedCity != null) ? selectedCity.getId() : 1;</span>
<span class="nc" id="L319">		String zipcode = zipcodeText.getText();</span>

<span class="nc" id="L321">		return new TeacherUpdateDTO(id, firstname, lastname, vat, fathername,</span>
<span class="nc" id="L322">				phoneNumber, email, street, streetNumber, zipcode, cityId);</span>
	}

	private void fetchTeacherFromDatabase(int id) {
		try {
<span class="nc" id="L327">			dto = teacherService.getTeacherById(id);</span>

<span class="nc" id="L329">			firstnameText.setText(dto.getFirstname());</span>
<span class="nc" id="L330">			lastnameText.setText(dto.getLastname());</span>
<span class="nc" id="L331">			vatText.setText(dto.getVat());</span>
<span class="nc" id="L332">			fathernameText.setText(dto.getFatherName());</span>
<span class="nc" id="L333">			phoneNumberText.setText(dto.getPhoneNum());</span>
<span class="nc" id="L334">			emailText.setText(dto.getEmail());</span>
<span class="nc" id="L335">			streetText.setText(dto.getStreet());</span>
<span class="nc" id="L336">			streetNumberText.setText(dto.getStreetNum());</span>

<span class="nc" id="L338">			int cityIdFromDB = dto.getCityId(); // Get city_id from DB</span>

			// Find the matching city using Streams
<span class="nc" id="L341">			City selectedCity = cities.stream()</span>
<span class="nc bnc" id="L342" title="All 2 branches missed.">					.filter(city -&gt; city.getId() == cityIdFromDB)</span>
<span class="nc" id="L343">					.findFirst()</span>
<span class="nc" id="L344">					.orElse(null); // Returns null if no match is found</span>

			// Select the city in the JComboBox
<span class="nc bnc" id="L347" title="All 2 branches missed.">			if (selectedCity != null) {</span>
<span class="nc" id="L348">				cityComboBox.setSelectedItem(selectedCity);</span>
<span class="nc" id="L349">			} else cityComboBox.setSelectedIndex(0);</span>

<span class="nc" id="L351">			zipcodeText.setText(dto.getZipCode());</span>
<span class="nc" id="L352">			errorFirstname.setText(&quot;&quot;);</span>
<span class="nc" id="L353">			errorLastname.setText(&quot;&quot;);</span>

<span class="nc" id="L355">		} catch (TeacherDAOException | TeacherNotFoundException e) {</span>
			//e.printStackTrace();
			//JOptionPane.showMessageDialog(null, &quot;Select error in fetch teacher&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);
<span class="nc" id="L358">			Main.getViewTeachersPage().setEnabled(true);</span>
<span class="nc" id="L359">			Main.getUpdateTeacherPage().setVisible(false);</span>
<span class="nc" id="L360">		}</span>
<span class="nc" id="L361">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>